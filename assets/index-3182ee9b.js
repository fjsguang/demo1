import{j as G,b as P,k as u,l as j,_ as V,m as H,s as O,n as W,p as z,o as d,e as f,g as y,F as L,f as T,u as i,q as J,v as N}from"./index-603c2d14.js";const K=G("store",()=>{const b=P([{name:"laoshu",color:"rgb(0, 0, 255)",show:!0},{name:"niu",color:"rgb(128, 0, 255)",show:!0},{name:"laohu",color:"rgb(255, 0, 255)",show:!0},{name:"tuzi",color:"rgb(255, 0, 128)",show:!0},{name:"long",color:"rgb(255, 0, 0)",show:!0},{name:"she",color:"rgb(255, 128, 0)",show:!0},{name:"ma",color:"rgb(255, 255, 0)",show:!0},{name:"yang",color:"rgb(128, 255, 0)",show:!0},{name:"houzi",color:"rgb(0, 255, 0)",show:!0},{name:"ji",color:"rgb(0, 255, 128)",show:!0},{name:"gou",color:"rgb(0, 255, 255)",show:!0},{name:"zhu",color:"rgb(0, 128, 255)",show:!0}]),D=u(50),t=u(6),h=u(6),v=u(3),q=u(60),x=u(6),$=u([]),c=u([]),r=j(()=>h.value*v.value),k=j(()=>Array.from(Array(v.value*r.value),()=>b.filter(p=>!!p.show)).flat().sort(p=>Math.random()-.5)),w=j(()=>Math.ceil(k.value.length/t.value/h.value));return{simpleDate:b,size:D,rows:t,cols:h,oneGroupCount:v,odds:q,maxlength:x,mainList:$,moveList:c,group:r,renderDate:k,layerCount:w}});const Q={class:"main"},U=["onClick","id"],X={class:"icon","aria-hidden":"true"},Y=["xlink:href"],Z={class:"move"},ee=["id"],oe={class:"icon","aria-hidden":"true"},le=["xlink:href"],te={__name:"index",setup(b){H(()=>import("./iconfont-d0167864.js"),[]);const{simpleDate:D,size:t,rows:h,cols:v,oneGroupCount:q,odds:x,maxlength:$,mainList:c,moveList:r,group:k,renderDate:w,layerCount:p}=O(K());let _,g;W(()=>{E()});function E(){A(),B(),z(()=>{M()})}function A(){_=document.querySelector(".main"),g=document.querySelector(".move"),_.style.height=`${t.value*h.value+t.value*2}px`,_.style.width=`${t.value*v.value}px`,g.style.height=`${t.value}px`,g.style.width=`${t.value*$.value}px`}function B(){for(let o=p.value;o>0;o--)for(let a=0;a<h.value;a++)for(let e=0;e<v.value;e++){let l=o%2===0?t.value/2:0,s=Math.random()*100<x.value&&w.value.pop();s&&c.value.push({...s,ly:o,i:a,j:e,pyStep:l})}}function M(){c.value.forEach(o=>{const a=o.ly,e=o.i,l=o.j;o.disabled=!1;const s=a%2===0;if(a+1>p.value)o.disabled=!1;else for(let n=a+1;n<=p.value;n++){const m=n%2===0;if(s===m)if(!!_.querySelector(`#m${n}-${e}-${l}`)){o.disabled=!0;break}else o.disabled=!1;else if(s&&!m)if([`${n}-${e}-${l}`,`${n}-${e+1}-${l}`,`${n}-${e}-${l+1}`,`${n}-${e+1}-${l+1}`].some(S=>!!_.querySelector("#m"+S))){o.disabled=!0;break}else o.disabled=!1;else if(!s&&m)if([`${n}-${e}-${l}`,`${n}-${e-1}-${l}`,`${n}-${e}-${l-1}`,`${n}-${e-1}-${l-1}`].some(S=>!!_.querySelector("#m"+S))){o.disabled=!0;break}else o.disabled=!1}})}let C=!0;function I(o,a,e){const l=e.target;if(o.disabled||!C)return;C=!1;let s=g.offsetLeft-t.value-4,n=g.offsetTop-t.value/2-4;r.value.length>0&&(s=g.lastElementChild.offsetLeft+t.value),l.style.top=`${n}px`,l.style.left=`${s}px`,l.transitionNamesCount=0,l.ontransitionend=m=>{l.transitionNamesCount++,l.transitionNamesCount===2&&(F(o,a,l),C=!0)}}function F(o,a,e){e.ontransitionend=null,c.value.splice(a,1),r.value.push(o),z(()=>{if(r.value.filter(s=>o.name===s.name).length>=3)for(let s=r.value.length-1;s>=0;s--)r.value[s].name===o.name&&r.value.splice(s,1);if(r.value.length===$.value)return alert("游戏结束"),location.reload();if(c.value.length===0)return alert("恭喜通关");z(()=>{M()})})}return(o,a)=>(d(),f(L,null,[y("button",{onClick:E},"重置"),y("div",Q,[(d(!0),f(L,null,T(i(c),(e,l)=>(d(),f("div",{key:"m"+e.ly+"-"+e.i+"-"+e.j,class:J(["item",{disabled:e.disabled}]),onClick:s=>I(e,l,s),id:"m"+e.ly+"-"+e.i+"-"+e.j,style:N({width:i(t)+"px",height:i(t)+"px",left:i(t)*e.j+e.pyStep+"px",top:i(t)*e.i+e.pyStep+"px",backgroundColor:e.color,zIndex:e.ly*2+100})},[(d(),f("svg",X,[y("use",{"xlink:href":"#icon-"+e.name},null,8,Y)]))],14,U))),128))]),y("div",Z,[(d(!0),f(L,null,T(i(r),e=>(d(),f("div",{class:"item",id:"m"+e.ly+"-"+e.i+"-"+e.j,style:N({width:i(t)+"px",height:i(t)+"px",backgroundColor:e.color})},[(d(),f("svg",oe,[y("use",{"xlink:href":"#icon-"+e.name},null,8,le)]))],12,ee))),256))])],64))}},ne=V(te,[["__scopeId","data-v-5e151355"]]);export{ne as default};
